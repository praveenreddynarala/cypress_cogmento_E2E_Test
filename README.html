<!DOCTYPE html>
<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="page-object-model-in-cypress">Page Object Model in Cypress</h1>
<hr>
<p>In typical Page Object Model, each web page has its own class and where you maintain all page element locators &amp; its actions. Using class objects, we can expose pages in test classes. What if, the application has 100+ pages and it is still growing and ended up in creating too many page classes.</p>
<p>Unlike the above pattern, we still follow the Page Object model without using Object-Oriented programming. JavaScript is a Light Oriented programming language and Cypress took this advantage is developing E2E tests without any hassle. Hence, instead of creating page classes, should use page files, utils or Cypress common.js.</p>
<p><strong>Page files</strong> (.js or .ts). are independent and maintains all page level locators and its actions at one place. Instead class, we use simple JavaScript functions (if not better because the type check step can understand individual function signatures) and export them.</p>
<pre><code>            import { expect } from &quot;chai&quot;;

            //Page locators
            const emailField = '[name=&quot;email&quot;]';
            const passField = '[name=&quot;password&quot;]';
            const loginBtn = '.ui.fluid.large.blue.submit.button';
            const userNameLable = '.user-display';

            //Simple JavaScript function to SignIn
            export const signin = (username, password) =&gt; {
                cy.setValue(emailField, username)
                cy.setValue(passField, password)
                cy.clickElement(loginBtn)
            }

            //Function to validate SignIn success
            export const verify_login_success = (expected_username) =&gt; {
                cy.getText('CSS', userNameLable, 8000).then((text) =&gt; {
                    expect(text).to.eq(expected_username)
                })
            }
</code></pre>
<p>Use the advantage of <strong>Cypress commonds.js</strong> file to maintain all application level reusable functions. This will reduce the dependency and maintenance. It acts like an one stop shot.</p>
<pre><code>            //Create element
            Cypress.Commands.add('getElement', (locatorType, weblocator, timeout=10) =&gt; {
                if(locatorType === 'CSS'){
                    cy.get(weblocator, {timeout: timeout}).then(($ele) =&gt; {
                        return cy.wrap($ele)
                    })
                }else{
                    cy.xpath(weblocator).then(($ele) =&gt; {
                        cy.wrap($ele)
                    })
                }
            })
            
            //Click element
            Cypress.Commands.add('clickElement', (element_locator, timeout=10) =&gt; {
                try {
                    cy.get(element_locator, {timeout: timeout}).should('be.visible').click()
                } catch (error) {
                    cy.log('Unable to click element')
                }
            })
            
            // -- This will select an item from list control
            Cypress.Commands.add('selectlistitem', (weblocator, option) =&gt; {
                cy.get(weblocator).each(($ele, index, $list) =&gt; {
                    if($ele.text() === option){
                        cy.wrap($ele).click()
                    }
                })
            })
</code></pre>
<p>To expose all custome commands through Cypress (cy 0 commands, we shoould create index.d.ts file in cypress/support folder.</p>
<pre><code>            /// &lt;reference types=&quot;cypress&quot; /&gt;

            declare namespace Cypress {
                interface Chainable&lt;Subject&gt; {
                    /**
                     * This will select an item from list control
                     * @param weblocator 
                     * @param option 
                     */
                    selectlistitem(weblocator:string, option:string): Chainable&lt;any&gt;
                    /**
                     * Get text on an element
                     * @param locatorType 
                     * @param weblocator 
                     * @param timeout 
                     */
                    getText(locatorType:string, weblocator:string, timeout?:10): Chainable&lt;any&gt;
                    /**
                     * Set value in Text Field
                     * @param element_locator 
                     * @param value 
                     */
                    setValue(element_locator:string, value:string): Chainable&lt;any&gt;
</code></pre>
<p><strong>IMPORTANT NOTE</strong> (Please find below steps to see how to configure Intellisense to expose all custom commands)</p>
<p>Example of calling above SignIn page in Cypress spec files (tests)</p>
<pre><code>            import { signin, verify_login_success } from &quot;../../framework/pageObjects/openCRM_login_page&quot;;

            describe('Contacts Test Cases', () =&gt; {   

                let created_contact
                let testData

                before('Load test data from fixtures', () =&gt; {
                    cy.fixture('example.json').then(($exampleData) =&gt; {
                        testData = $exampleData
                    })
                })
            it('Create new Contact', () =&gt; {
                    cy.visit('/contacts')
                    created_contact = create_new_contact()
                    cy.log(created_contact)
                    global_search(created_contact)
                    validate_created_contact(created_contact + ' Reddy Narala')
                })
                
             })         
</code></pre>
<hr>
<h2 id="setup">Setup</h2>
<h3 id="system-requirements">System Requirements:</h3>
<pre><code>    1. Windows 7 or above
    2. macOS 10.9 and above (64-bit only)
    3. Linux Ubuntu 12.04 and above, Fedora 21 and Debian 8 (64-bit only)
</code></pre>
<h3 id="nodejs">Node.js:</h3>
<pre><code>    1. Node.js 10 or 12 and above
</code></pre>
<h3 id="visual-studio-code">Visual Studio Code:</h3>
<pre><code>    1. Install Visual Studio Code
</code></pre>
<h3 id="install-cypress-via-npm">Install Cypress via npm:</h3>
<pre><code>    1. cd /your/project/path
    2. npm init
    3. npm install cypress --save-dev
    (OR)
    1. cd /your/project/path
    2. run 'code .' and enter. It will launch Visual Studio Code IDE 
    3. In Terminal -&gt; run npm install cypress --save-dev
</code></pre>
<hr>
<h3 id="setting-baseurl">Setting baseUrl:</h3>
<pre><code>    cypress.json -&gt; add &quot;baseUrl&quot;:&quot;https://www.google.com/&quot;
</code></pre>
<hr>
<h2 id="enabling-cypress-intellisense">Enabling Cypress Intellisense</h2>
<h3 id="triple-slash-directive">Triple slash directive</h3>
<p>The simplest way to see IntelliSense when typing a Cypress command or assertion is to add a triple-slash directive to the head of your JavaScript or TypeScript testing file. This will turn the IntelliSense on a per file basis. Copy the comment line below and paste it into your spec file.</p>
<pre><code>            /// &lt;reference types=&quot;Cypress&quot; /&gt;
</code></pre>
<p>If you write custom commands and provide TypeScript definitions for them, you can use the triple slash directives to show IntelliSense, even if your project uses only JavaScript. For example, if your custom commands are written in cypress/support/commands.js and you describe them in cypress/support/index.d.ts use.</p>
<pre><code>            // type definitions for Cypress object &quot;cy&quot;
            /// &lt;reference types=&quot;cypress&quot; /&gt;

            // type definitions for custom commands like &quot;createDefaultTodos&quot;
            /// &lt;reference types=&quot;../support&quot; /&gt;
</code></pre>
<h4 id="highly-recommanded-way-of-working-with-intellisense-stop-adding-triple-slash-directives-to-each-javascript-spec-file">Highly recommanded way of working with Intellisense. Stop adding triple slash directives to each JavaScript spec file.</h4>
<p>Reference type declarations via <strong>tsconfig.json / jsconfig.json</strong></p>
<pre><code>        {
            &quot;compilerOptions&quot;: {
            &quot;lib&quot;: [&quot;es2015&quot;, &quot;dom&quot;],
            &quot;allowJs&quot;: true,
            &quot;noEmit&quot;: true,
            &quot;types&quot;: [
                &quot;cypress&quot;
            ]
            },
            &quot;include&quot;: [
                &quot;./node_modules/cypress&quot;,
                &quot;cypress/**/*.js&quot;,
                &quot;cypress/**/*.d.ts&quot; //index.d.ts -&gt; This will enable intellisence in all specs for custom commands
            ]
        }
</code></pre>
<p><strong>Important/Note:</strong> Please remove tsconfig.json file from project root folder. Otherwise tsconfig.json file does not work.</p>
<hr>
<h2 id="run-tests-in-different-browsers">Run Tests in different browsers:</h2>
<ol>
<li>Run cmd -&gt; cypress run --browser chrome/firefox/electron
or</li>
<li>We can set in package.json
// &quot;cy:run:chrome&quot;: &quot;cypress run --browser chrome&quot;,
// &quot;cy:run:firefox&quot;: &quot;cypress run --browser firefox&quot;</li>
</ol>
<h3 id="run-in-headless-mode-cmd">Run in Headless mode (cmd):</h3>
<pre><code>     $ cy:run --headless --browser chrome
</code></pre>
<h3 id="run-in-parallel">Run in parallel:</h3>
<pre><code>    $ cypress run --record --parallel
</code></pre>
<h3 id="run-tests-specifying-a-single-test-file-to-run-instead-of-all-tests">Run tests specifying a single test file to run instead of all tests:</h3>
<pre><code>    $ cypress run --spec &quot;cypress/integration/examples/actions.spec.js&quot;
    .\node_modules\.bin\cypress run --browser chrome --record --key e2ccadb8-bf34-47bb-852b-9fe78e387d57 --headless
</code></pre>
<h3 id="run-tests-specifying-multiple-test-files-to-run">Run tests specifying multiple test files to run:</h3>
<pre><code>    $ cypress run --spec &quot;cypress/integration/examples/actions.spec.js,cypress/integration/examples/files.spec.js&quot;
</code></pre>
<hr>
<h2 id="enable-xpath-github-path---httpsgithubcomcypress-iocypress-xpath">Enable XPATH: (GITHUB path -&gt; https://github.com/cypress-io/cypress-xpath)</h2>
<ol>
<li>Install npm install -D cypress-xpath</li>
<li>Then include in your project's cypress/support/index.js -&gt; require('cypress-xpath')</li>
</ol>
<hr>
<h2 id="enable-cucumber">Enable Cucumber:</h2>
<h3 id="configuration">Configuration:</h3>
<ol>
<li>
<p>Install npm install --save-dev cypress-cucumber-preprocessor</p>
</li>
<li>
<p>To enable usage of Cucumber in the Cypress automation framework, we need to make some configurations in below 3 files..</p>
<pre><code> a. plugins/index.js
 b. cypress.json
 c. package.json
</code></pre>
</li>
</ol>
<p>index.js: 1. The first file (shown by marker 1) is the “index.js” file under the plugins folder. We need to make the following changes in the “index.js” file, which exports Cucumber as a module and make it accessible in other Cypress files.</p>
<pre><code>        const cucumber = require('cypress-cucumber-preprocessor').default
        
        module.exports = (on, config) =&gt; {
            on('file:preprocessor', cucumber())
        }
</code></pre>
<h3 id="cypressjson">cypress.json:</h3>
<pre><code>        Add below lines consider only .feature extension files
        &quot;testFiles&quot;: &quot;**/*.{feature,features}&quot;,
        &quot;ignoreTestFiles&quot;: &quot;**/*.{js,ts}&quot;
</code></pre>
<h3 id="packagejson">package.json:</h3>
<pre><code>        Add &quot;cypress-cucumber-preprocessor&quot;: {
                &quot;nonGlobalStepDefinitions&quot;: true
            } //Here we need to specify the configuration that non-global step definitions are allowed, which means that step definitions can exist in sub-folders as well.
</code></pre>
<h2 id="recommended-reference-httpswanagoio20200113javascript-testing-cypress-cucumber"><strong>Recommended Reference:</strong> https://wanago.io/2020/01/13/javascript-testing-cypress-cucumber/</h2>
<h2 id="creating-feature-and-step-definition-files">Creating Feature and step definition files:</h2>
<h3 id="feature-file">Feature File:</h3>
<ol>
<li>Always feature files should be created in 'integration' folder
<strong>Example:</strong> integration\event.feature, integration\contact.feature</li>
</ol>
<h3 id="step-definition-files">Step Definition Files:</h3>
<ol>
<li>Always create folder based on feature file name in 'integration' folder
<strong>Example:</strong> integration\event\event_steps.js, integration\contact\contact_steps.js
<strong>Note:</strong> Folder structure should not change</li>
</ol>
<h3 id="commonglobalrepeated-test-step-files">Common/Global/Repeated Test Step Files:</h3>
<pre><code>    1. Create common folder inside 'integration' folder
        Example: integration\common\common_steps.js
</code></pre>
<h2 id="cucumber-hooks">Cucumber Hooks:</h2>
<ol>
<li>Cucumber has two main Hooks
a. Before
b. After</li>
</ol>
<p><strong>Before:</strong> This will execute before all scenrios. We can also create tagged Hooks.</p>
<pre><code>        Before(() =&gt; {

        })
        Example: Before({ tags: &quot;@foo&quot; }, () =&gt;  {

        })
    After: This will execute after all scenarios execution. We can also create tagged hooks. Tagged hooks will works based on Scenrio tags.
        Example: After(() =&gt; {

        })
        Example: After({ tags: &quot;@foo&quot; }, () =&gt;  {

        })
</code></pre>
<p><strong>Note:</strong> We can also use Cypress Hooks as well in cucumber</p>
<h3 id="parameterization-in-cucumber-scenarios">Parameterization in Cucumber Scenarios:</h3>
<ol>
<li>Data Table -&gt;</li>
</ol>
<p><strong>Example Scenario:</strong></p>
<pre><code>            Scenario: Create new contact
            Given user navigate to &quot;contacts&quot; screen
            When user create new contact:
                | FirstName | LastName | MiddleName | Category  | Status | Description         |
                | Praveen   | Narala   | Reddy      | Affiliate | New    | Sample Description! |
            Then user should be able to validate created contact
</code></pre>
<p><strong>Example Steps:</strong></p>
<pre><code>            let created_contact //Global variable
            When('user create new contact:', (dataTable) =&gt; {
                cy.log(dataTable.hashes())
                const userDetails = dataTable.hashes()
                for(const row of userDetails){
                    created_contact = create_new_contact(row.FirstName, row.LastName, row.MiddleName, row.Category, row.Status, row.Description)
                }
            })
</code></pre>
<ol start="2">
<li>
<p>Example Scenario Ouline:</p>
<pre><code>     Scenario Outline: Update Manage Calendar
     When user update manages calendar &quot;&lt;CalendarName&gt;&quot;
     Then user should be able to see updated manage calendar &quot;&lt;CalendarName&gt;&quot;

     Examples:
         | CalendarName                                     |
         | Praveen Narala &lt;praveenreddy.narala@gmail.com&gt; 1 |
</code></pre>
</li>
<li>
<p>Example Steps:</p>
<pre><code>     When('user update manages calendar {string}', (eventName) =&gt; {
         manage_calendar(eventName)
     })
</code></pre>
</li>
<li>
<p>Backgroung:</p>
<pre><code> Example:
     Background: Login to application
     Given user login to applications
     And user navigate to &quot;calendar&quot; screen
</code></pre>
</li>
</ol>
<hr>
<h3 id="enabel-cucumber-json-report">Enabel Cucumber JSON Report:</h3>
<p>The cypress-cucumber-preprocessor can generate a cucumber.json file output as it runs the features files. This is separate from, and in addition to, any Mocha reporter configured in Cypress.</p>
<p>Output, by default, is written to the folder cypress/cucumber-json, and one file is generated per feature.
Add the following to the cypress-cucumber-preprocessor section in package.json to turn it off or change the defaults:</p>
<pre><code>        &quot;cypress-cucumber-preprocessor&quot;: {
            &quot;cucumberJson&quot;: {
            &quot;generate&quot;: true,
            &quot;outputFolder&quot;: &quot;cypress/cucumber-json&quot;,
            &quot;filePrefix&quot;: &quot;&quot;,
            &quot;fileSuffix&quot;: &quot;.cucumber&quot;
            }
        }
</code></pre>
<hr>

</body>
</html>
